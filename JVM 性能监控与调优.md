# JVM 性能监控与调优



### 一、概述

#### 1、为什么要调优及监控

> - 防止出现 OOM 的情况
> - 出现 OOM 了，通过 JVM 调优去解决 OOM 
> - 减少 Full GC 出现的频率



#### 2、性能优化的步骤

1）、性能监控（发现问题）

> 包括以下几个方面：
>
> - GC 频繁
> - cpu load 过高
> - OOM
> - 内存泄漏
> - 死锁
> - 程序响应时间较长

2）、性能分析（排查问题）

> - 打印 GC 日志，通过 GCviewer 或者 `http://gceasy.io` 来分析日志信息
> - 灵活运用命令行工具，jstack ，jmap ，jinfo
> - dump 出堆文件，使用内存分析工具分析文件
> - 使用阿里 Arthas，或者 jconsole，JVisualVM 来实时查看 JVM 状态
> - jstack 查看堆栈信息

3）、性能调优（解决问题）

> - 适当增加内存，根据业务背景选择垃圾回收器
> - 优化代码，控制内存使用
> - 增加机器，分散节点压力
> - 合理设置线程池数量
> - 使用中间件提高程序效率，如缓存，消息队列等。









